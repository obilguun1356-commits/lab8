<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>lab8</title>

  <style>
    body {
      font-family: Arial;
      text-align: center;
      padding: 30px;

      background-image: url("https://images.ctfassets.net/u73tyf0fa8v1/s4z71xfLy7GWskStqj2QF/3ba099c0af4bea384ca9389d363bc477/Ck3-tours-tournaments-introbg.jpg?w=2048&q=75");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;

      color: white;
      text-shadow: 2px 2px 5px black;
    }

    #Hariult {
      font-size: 35px;
      letter-spacing: 10px;
      margin: 20px;
    }

    #Useg button {
      margin: 5px;
      padding: 10px;
      width: 40px;
      font-size: 16px;
      border-radius: 5px;
      background: rgba(255,255,255,0.8);
      border: none;
      cursor: pointer;
    }

    #Useg button:disabled {
      background: rgba(0,0,0,0.4);
      color: white;
    }

    canvas {
      border: 1px solid white;
      margin-top: 20px;
      background: rgba(0,0,0,0.6);
    }
  </style>

</head>
<body>

  <h1>Hangman</h1>

  <button id="startBtn"
          style="padding: 10px 20px; font-size: 18px; cursor:pointer; margin-bottom: 15px;">
          –≠—Ö–ª—ç—Ö
  </button>

  <h2 id="Asuult"></h2>

  <div id="Hariult"></div>

  <canvas id="hangman" width="300" height="300"></canvas>

  <div id="Useg"></div>


<script>
  var questions = [
    '“Æ–Ω—ç–≥–Ω–∏–π –∑—É–ª–∑–∞–≥–∞?',
    '–ú–æ–Ω–≥–æ–ª—ã–Ω —Ö–∞–º–≥–∏–π–Ω –≥“Ø–Ω –Ω—É—É—Ä?',
    '–î—ç–ª—Ö–∏–π–Ω —Ö–∞–º–≥–∏–π–Ω —Ç–æ–º –º”©—Ä”©–Ω?',
    '–ú–æ–Ω–≥–æ–ª—ã–Ω ‚Ññ1 —Å—É—Ä–≥—É—É–ª—å?'
  ];
  var answers = ['–ì–ê–í–ê–†', '–•”®–í–°–ì”®–õ', '–ù–ò–õ', '–ú–£–ò–°'];

  var chosenAnswer = "";
  var display = [];
  var wrong = 0;

  var order = [];
  var currentIndex = 0;

  const qBox = document.getElementById("Asuult");
  const aBox = document.getElementById("Hariult");
  const lettersBox = document.getElementById("Useg");
  const canvas = document.getElementById("hangman");
  const ctx = canvas.getContext("2d");

  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function clearCanvasAndPath() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
  }

  function draw(step) {
    ctx.strokeStyle = "white";
    ctx.lineWidth = 3;
    ctx.beginPath();

    switch(step) {
      case 1: ctx.moveTo(10,280); ctx.lineTo(290,280); ctx.stroke(); break;
      case 2: ctx.moveTo(60,280); ctx.lineTo(60,40); ctx.stroke(); break;
      case 3: ctx.moveTo(60,40); ctx.lineTo(200,40); ctx.stroke(); break;
      case 4: ctx.moveTo(200,40); ctx.lineTo(200,80); ctx.stroke(); break;
      case 5: ctx.beginPath(); ctx.arc(200,110,30,0,Math.PI*2); ctx.stroke(); break;
      case 6: ctx.moveTo(200,140); ctx.lineTo(200,220); ctx.stroke(); break;
      case 7: ctx.moveTo(200,160); ctx.lineTo(160,190); ctx.stroke(); break;
      case 8: ctx.moveTo(200,160); ctx.lineTo(240,190); ctx.stroke(); break;
      case 9: ctx.moveTo(200,220); ctx.lineTo(170,260); ctx.stroke(); break;
      case 10: ctx.moveTo(200,220); ctx.lineTo(230,260); ctx.stroke(); break;
    }
  }

  function startGame() {
    order = Array.from(Array(questions.length).keys());
    shuffleArray(order);
    currentIndex = 0;
    loadQuestion();
  }

  function loadQuestion() {
    clearCanvasAndPath();
    lettersBox.innerHTML = "";
    wrong = 0;

    if (currentIndex >= order.length) {
      qBox.textContent = "";
      aBox.textContent = "";
      alert("–ë“Ø—Ö –∞—Å—É—É–ª—Ç—ã–≥ –∞–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å–≥–∞–ª–∞–∞! üéâ");
      return;
    }

    const idx = order[currentIndex];
    qBox.textContent = questions[idx];
    chosenAnswer = answers[idx].toUpperCase();

    display = chosenAnswer.split("").map(c => c === " " ? " " : "_");
    aBox.textContent = display.join(" ");
    const mongolLetters = ['–ê','–ë','–í','–ì','–î','–ï','–Å','–ñ','–ó','–ò','–ô','–ö','–õ','–ú','–ù','–û','”®','–ü','–†','–°','–¢','–£','“Æ','–§','–•','–¶','–ß','–®','–©','–™','–´','–¨','–≠','–Æ','–Ø'];

    mongolLetters.forEach(letter => {
      let btn = document.createElement("button");
      btn.textContent = letter;
      btn.onclick = () => guess(btn.textContent, btn);
      lettersBox.appendChild(btn);
    });
  }
  function guess(letter, btn) {

    let found = false;

    for (let i = 0; i < chosenAnswer.length; i++) {
      if (display[i] === "_" && chosenAnswer[i] === letter) {
        display[i] = letter;
        found = true;
        break;
      }
    }

    aBox.textContent = display.join(" ");
    btn.disabled = true;

    if (found) {

      if (!display.includes("_")) {
        setTimeout(() => {
          alert("–Ø–ª–∞–≥—á üéâ !");
          currentIndex++;
          loadQuestion();
        }, 200);
      }

    } else {
      wrong++;
      draw(wrong);

      if (wrong === 10) {
        setTimeout(() => {
          alert("–Ø–ª–∞–≥–¥–∞–≥—á üíÄ! –ó”©–≤ —Ö–∞—Ä–∏—É–ª—Ç: " + chosenAnswer);
          currentIndex++;
          loadQuestion();
        }, 200);
      }
    }
  }

  document.getElementById("startBtn").onclick = startGame;
</script>

</body>
</html>
