<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>Hangman</title>

  <style>
    body {
      font-family: Arial;
      text-align: center;
      padding: 30px;

      background-image: url("https://images.ctfassets.net/u73tyf0fa8v1/s4z71xfLy7GWskStqj2QF/3ba099c0af4bea384ca9389d363bc477/Ck3-tours-tournaments-introbg.jpg?w=2048&q=75");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;

      color: white;
      text-shadow: 2px 2px 5px black;
    }

    #Hariult {
      font-size: 30px;
      letter-spacing: 10px;
      margin: 20px;
    }

    #Useg button {
      margin: 4px;
      padding: 10px;
      width: 40px;
      font-size: 16px;
      border-radius: 5px;
      background: rgba(255,255,255,0.8);
      border: none;
      cursor: pointer;
    }

    #Useg button:disabled {
      background: rgba(0,0,0,0.4);
      color: white;
    }

    canvas {
      border: 1px solid white;
      margin-top: 20px;
      background: rgba(0,0,0,0.6);
    }
  </style>

</head>
<body>

  <h1>Hangman</h1>

  <button id="startBtn"
          style="padding: 10px 20px; font-size: 18px; cursor:pointer; margin-bottom: 15px;">
          Ehleh
  </button>

  <h2 id="Asuult"></h2>

  <div id="Hariult"></div>

  <canvas id="hangman" width="300" height="300"></canvas>

  <div id="Useg"></div>


<script>
  // –ê—Å—É—É–ª—Ç + —Ö–∞—Ä–∏—É–ª—Ç
  var questions = [
    'Unegnii zulzaga?',
    'Mongoliin hamgiin gun nuur?',
    'Delhiin hamgiin tom murun?',
    'Mongoliin ‚Ññ1 surguuli?'
  ];
  var answers = ['Gavar', 'Huvsgul', 'Nile', 'NUM'];

  // –¢–æ–≥–ª–æ–æ–º—ã–Ω state
  var chosenAnswer = "";
  var display = [];
  var wrong = 0;

  // –†–∞–Ω–¥–æ–º –¥–∞—Ä–∞–∞–ª–∞–ª
  var order = [];
  var currentIndex = 0;

  const qBox = document.getElementById("Asuult");
  const aBox = document.getElementById("Hariult");
  const lettersBox = document.getElementById("Useg");
  const canvas = document.getElementById("hangman");
  const ctx = canvas.getContext("2d");

  // Fisher‚ÄìYates shuffle
  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function clearCanvasAndPath() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
  }

  function draw(step) {
    ctx.strokeStyle = "white";
    ctx.lineWidth = 3;
    ctx.beginPath();

    switch(step) {
      case 1: ctx.moveTo(10,280); ctx.lineTo(290,280); ctx.stroke(); break;
      case 2: ctx.moveTo(60,280); ctx.lineTo(60,40); ctx.stroke(); break;
      case 3: ctx.moveTo(60,40); ctx.lineTo(200,40); ctx.stroke(); break;
      case 4: ctx.moveTo(200,40); ctx.lineTo(200,80); ctx.stroke(); break;
      case 5: ctx.beginPath(); ctx.arc(200,110,30,0,Math.PI*2); ctx.stroke(); break;
      case 6: ctx.moveTo(200,140); ctx.lineTo(200,220); ctx.stroke(); break;
      case 7: ctx.moveTo(200,160); ctx.lineTo(160,190); ctx.stroke(); break;
      case 8: ctx.moveTo(200,160); ctx.lineTo(240,190); ctx.stroke(); break;
      case 9: ctx.moveTo(200,220); ctx.lineTo(170,260); ctx.stroke(); break;
      case 10: ctx.moveTo(200,220); ctx.lineTo(230,260); ctx.stroke(); break;
    }
  }

  // Game start ‚Üí random order
  function startGame() {
    order = Array.from(Array(questions.length).keys());
    shuffleArray(order);
    currentIndex = 0;
    loadQuestion();
  }

  function loadQuestion() {
    clearCanvasAndPath();
    lettersBox.innerHTML = "";
    wrong = 0;

    if (currentIndex >= order.length) {
      qBox.textContent = "";
      aBox.textContent = "";
      alert("Wow bugdiig ni duusgachihdag gaihaltai humun yumaa! üéâ");
      return;
    }

    const idx = order[currentIndex];
    qBox.textContent = questions[idx];
    chosenAnswer = answers[idx].toUpperCase();

    display = chosenAnswer.split("").map(c => c === " " ? " " : "_");
    aBox.textContent = display.join(" ");

    // “Ø—Å—ç–≥ —Ç–æ–≤—á–ª—É—É—Ä—É—É–¥
    for (let i = 65; i <= 90; i++) {
      let btn = document.createElement("button");
      btn.textContent = String.fromCharCode(i);
      btn.onclick = () => guess(btn.textContent, btn);
      lettersBox.appendChild(btn);
    }
  }

  // –ó”©–≤—Ö”©–Ω –Ω—ç–≥ —à–∏—Ä—Ö—ç–≥ “Ø—Å–≥–∏–π–≥ –∏–ª –≥–∞—Ä–≥–∞–Ω–∞
  function guess(letter, btn) {

    let found = false;

    // –∑”©–≤—Ö”©–Ω —ç—Ö–Ω–∏–π "_" –¥—ç—ç—Ä —Ç–∞–∞—Ä–∞—Ö “Ø—Å–≥–∏–π–≥ –∏–ª –≥–∞—Ä–≥–∞—Ö
    for (let i = 0; i < chosenAnswer.length; i++) {
      if (display[i] === "_" && chosenAnswer[i] === letter) {
        display[i] = letter;
        found = true;
        break;
      }
    }

    aBox.textContent = display.join(" ");

    if (found) {

      if (!display.includes("_")) {
        setTimeout(() => {
          alert("Winner! üéâ");
          currentIndex++;
          loadQuestion();
        }, 200);
      }

    } else {
      wrong++;
      draw(wrong);

      if (wrong === 10) {
        setTimeout(() => {
          alert("Loser! –•–∞—Ä–∏—É–ª—Ç: " + chosenAnswer);
        }, 200);
      }
    }
  }

  document.getElementById("startBtn").onclick = startGame;
</script>

</body>
</html>
